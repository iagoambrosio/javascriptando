<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
    <body>
        <div>
            <h2>Documentação da API /person</h2>
            <p><strong>Criar uma pessoa (POST):</strong></p>
            <pre>
curl -X POST -H "Content-Type: application/json" \
  -d '{"name": "João", "salary": 2000, "approved": true}' \
  http://SEU_HOST:3000/person
            </pre>
            <p><strong>Recuperar todas as pessoas (GET):</strong></p>
            <pre>
curl -X GET http://SEU_HOST:3000/person
            </pre>
            <p><strong>Recuperar uma pessoa por id (GET):</strong></p>
            <pre>
curl -X GET http://SEU_HOST:3000/person/ID_DA_PESSOA
            </pre>
        </div>
        <div>
            <h2>Criar uma pessoa via formulário</h2>
            <form id="personForm">
                <input type="text" name="name" placeholder="Nome" required />
                <input type="number" name="salary" placeholder="Salário" required />
                <label>
                  <input type="checkbox" name="approved" /> Aprovado
                </label>
                <button type="submit">Criar Pessoa</button>
            </form>
            <div id="personResult"></div>
        </div>
        <div>
            <h2>Buscar pessoa por ID</h2>
            <form id="getPersonForm">
                <input type="text" name="personId" placeholder="ID da pessoa" required />
                <button type="submit">Buscar</button>
            </form>
            <div id="getPersonResult"></div>
        </div>
        <script>
        // Função para obter o host dinamicamente
        const apiBase = window.location.origin;

        // Formulário para criar pessoa
        document.getElementById('personForm').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const data = {
                name: form.name.value,
                salary: Number(form.salary.value),
                approved: form.approved.checked
            };
            const res = await fetch(apiBase + '/person', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await res.json();
            document.getElementById('personResult').innerText = JSON.stringify(result, null, 2);
        };

        // Formulário para buscar pessoa por ID
        document.getElementById('getPersonForm').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const personId = form.personId.value;
            const res = await fetch(apiBase + '/person/' + personId);
            const result = await res.json();
            document.getElementById('getPersonResult').innerText = JSON.stringify(result, null, 2);
        };
        </script>
      <div>
        <p>Rotas na aplicação:</p>
        <p>Para testes, utilize /test/cliente, com os parametros: </p>
        <p>Quantidade de retornos:qnt, tamanho máximo: tmn,tamanho minimo: minim </p>
        <p>para ver o recurso pessoa, utilize /person</p>
        <p>Exemplo de query string para a rota get em /util/cliente?qnt=30&tmn=15&minim=4 </p>
        <p>Api de conversão de pdf /util/converter </p>
      </div>
      <script src="./fetch"></script>

    </body>
</html>
